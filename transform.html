<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Mechanical Anime Transformer</title>

  <style>
    body {
      background: radial-gradient(circle at top, #111827, #000);
      color: #fff;
      font-family: Arial, sans-serif;
      text-align: center;
      margin-top: 20px;
    }

  #stage {
  position: relative;
  height: 440px;
  perspective: 800px;
}


    /* TRUCK */
    /* TRUCK (Same color identity as humanoid form) */
    #truck {
      position: absolute;
      left: 0;
      top: 140px;
    }
.truck-idle {
  animation: truckIdle 1.2s infinite;
}

    @keyframes truckIdle {
      50% {
        transform: translateY(-10px);
      }
    }

    /* ROBOT */
    #robot {
      display: none;
      width: 260px;
      margin: auto;
      position: relative;
      animation: assemble 1.2s ease forwards;
    }
/* TRUCK DRIVE BACK (center â†’ left) */
.drive-in {
  animation: driveIn 1s ease-out forwards;
}

@keyframes driveIn {
  from {
    transform: translateX(320px);
    opacity: 1;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

    @keyframes assemble {
      from {
        transform: translateY(60px) scale(0.9);
        opacity: 0;
      }

      to {
        transform: translateY(0) scale(1);
        opacity: 1;
      }
    }

    /* HEAD (helmet-like) */
    .head {
      width: 45px;
      height: 45px;
      background: linear-gradient(#facc15, #a16207);
      border-radius: 8px;
      margin: auto;
      position: relative;
      box-shadow: 0 0 15px #facc15;
    }

    /* HEADLIGHT EYES */
    .eye {
      width: 10px;
      height: 6px;
      background: #e0f2fe;
      position: absolute;
      top: 18px;
      box-shadow: 0 0 8px #38bdf8;
    }

    .eye.left {
      left: 6px;
    }

    .eye.right {
      right: 6px;
    }

    /* TORSO (armored chest) */
    .chest {
      width: 140px;
      height: 110px;
      background: linear-gradient(#fbbf24, #78350f);
      margin: 10px auto;
      border-radius: 12px;
      box-shadow: inset 0 0 12px #000;
    }

    /* SHOULDERS */
    .shoulder {
      width: 40px;
      height: 40px;
      background: linear-gradient(#fde68a, #92400e);
      position: absolute;
      top: 90px;
      border-radius: 6px;
    }

    .shoulder.left {
      left: 0;
    }

    .shoulder.right {
      right: 0;
    }

    /* ARMS */
    .arm {
      width: 18px;
      height: 90px;
      background: linear-gradient(#fde68a, #78350f);
      position: absolute;
      top: 130px;
    }

    .arm.left {
      left: 12px;
    }

    .arm.right {
      right: 12px;
    }

    /* LEGS */
    .legs {
      display: flex;
      justify-content: space-between;
      width: 140px;
      margin: auto;
    }

    /* THIGH */
    .thigh {
      width: 36px;
      height: 60px;
      background: linear-gradient(#92400e, #451a03);
      border-radius: 6px;
      margin-bottom: 4px;
    }

    /* CALF with integrated wheel */
    .calf {
      width: 40px;
      height: 70px;
      background: linear-gradient(#78350f, #1c1917);
      border-radius: 6px;
      position: relative;
    }

    /* WHEEL IN CALF */
    .calf::after {
      content: "";
      width: 34px;
      height: 34px;
      background: radial-gradient(circle, #111 40%, #6b7280 60%);
      border-radius: 50%;
      position: absolute;
      bottom: 4px;
      left: 3px;
    }
/* ROBOT IDLE TURN ANIMATION */
.robot-idle {
  animation: robotIdle 2.5s ease-in-out infinite;
  transform-origin: center bottom;
}

@keyframes robotIdle {
  0% {
    transform: rotateY(0deg);
  }
  25% {
    transform: rotateY(-6deg);
  }
  50% {
    transform: rotateY(0deg);
  }
  75% {
    transform: rotateY(6deg);
  }
  100% {
    transform: rotateY(0deg);
  }
}

    /* UI */
    input,
    button {
      padding: 8px;
      margin: 6px;
    }

    /* TRUCK DRIVE ANIMATION (left â†’ right) */
    .drive-out {
      animation: driveOut 1s ease-in forwards;
    }

    @keyframes driveOut {
      from {
        transform: translateX(0);
        opacity: 1;
      }

      to {
        transform: translateX(320px);
        opacity: 0;
      }
    }
  </style>
</head>

<body>


  <div id="stage">
<div id="truck" class="truck-idle">

      <svg width="360" height="280" viewBox="0 0 160 80">
        <!-- Body -->
        <rect x="20" y="30" width="90" height="30" rx="6" fill="#fde68a" />
        <rect x="70" y="10" width="40" height="20" rx="6" fill="#fde68a" />

        <!-- Windows -->
        <rect x="75" y="14" width="14" height="12" rx="2" fill="#111827" />
        <rect x="93" y="14" width="14" height="12" rx="2" fill="#111827" />

        <!-- Wheels -->
        <circle cx="40" cy="65" r="10" fill="#111" />
        <circle cx="40" cy="65" r="5" fill="#6b7280" />

        <circle cx="95" cy="65" r="10" fill="#111" />
        <circle cx="95" cy="65" r="5" fill="#6b7280" />
      </svg>
    </div>

    <div id="robot">
      <div class="head">
        <div class="eye left"></div>
        <div class="eye right"></div>
      </div>

      <div class="chest"></div>

      <div class="shoulder left"></div>
      <div class="shoulder right"></div>

      <div class="arm left"></div>
      <div class="arm right"></div>

      <div class="legs">
        <div>
          <div class="thigh"></div>
          <div class="calf"></div>
        </div>
        <div>
          <div class="thigh"></div>
          <div class="calf"></div>
        </div>
      </div>
    </div>

  </div>

  <input id="commandInput" placeholder="Type 'Transform'">
  <button onclick="handleTextCommand()">Submit</button>
  <button onclick="startVoiceCommand()">ðŸŽ¤ Speak</button>

  <script>
    let transformed = false;
    const truck = document.getElementById("truck");
    const robot = document.getElementById("robot");
 function transform() {
    if (!transformed) {
      // -------- TRUCK â†’ ROBOT --------
      truck.classList.remove("truck-idle");
      truck.classList.add("drive-out");

      setTimeout(() => {
        truck.style.display = "none";
        truck.classList.remove("drive-out");

        robot.style.display = "block";
        robot.classList.add("robot-idle");

        transformed = true;
      }, 1000);

    } else {
      // -------- ROBOT â†’ TRUCK (STAGED) --------

      // 1. Stop robot idle & hide robot
      robot.classList.remove("robot-idle");
      robot.style.display = "none";

      // 2. Show truck at robot position (center)
      truck.style.display = "block";
      truck.classList.remove("truck-idle");

      // Force starting point to center (same as drive-out end)
      truck.style.transform = "translateX(320px)";
      truck.style.opacity = "1";

      // 3. Next frame: animate truck back to left
      requestAnimationFrame(() => {
        truck.classList.add("drive-in");
      });

      // 4. After drive-in, restore idle
      setTimeout(() => {
        truck.classList.remove("drive-in");
        truck.style.transform = "translateX(0)";
        truck.classList.add("truck-idle");

        transformed = false;
      }, 1000);
    }
  }

  function handleTextCommand() {
    const input = commandInput.value.toLowerCase().trim();

    if (input === "transform" || input === "transformer") {
      transform();
    }

    commandInput.value = "";
  }


    function startVoiceCommand() {
      if (!("webkitSpeechRecognition" in window)) return;
      const rec = new webkitSpeechRecognition();
      rec.lang = "en-US";
      rec.start();
      rec.onresult = e => {
        if (e.results[0][0].transcript.toLowerCase().includes("transform")) {
          transform();
        }
      };
    }
  </script>

</body>

</html>